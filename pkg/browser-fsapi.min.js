var fs_api=function(){var e=n(document.body,function(e){function n(e){l&&r()}function t(e){s.classList.add(e)}function u(e){s.classList.remove(e)}var c=!1,l=!1,r=e.enterFullscreen,o=e.exitFullscreen,s=document.body;e.on("enter",function(){l=!1,t("fullscreen"),u("fullscreen_temp_off")}),e.on("exit",function(){c?(l=!0,t("fullscreen_temp_off")):(l=!1,c&&(document.removeEventListener("keydown",n),document.removeEventListener("keyup",n),document.removeEventListener("mousedown",n),document.removeEventListener("mouseup",n),document.removeEventListener("touchstart",n)),u("fullscreen_temp_off"),u("fullscreen"))}),e.enterFullscreen=function(e){l=!1,(c=!!e)&&(document.addEventListener("keydown",n),document.addEventListener("keyup",n),document.addEventListener("mousedown",n),document.addEventListener("mouseup",n),document.addEventListener("touchstart",n)),r()},e.exitFullScreen=function(){l=c=!1,u("fullscreen_temp_off"),u("fullscreen"),o()}});return e.newApi=n,e;function n(c,e){function t(e,n){e.forEach(function(e){e(c,n)})}function n(e,n){u.isFullscreen=function(){return!!document[n]},document.addEventListener(e,function(){var e=u.isFullscreen();t(e?u.__events.enter:u.__events.exit,e),t(u.__events.toggle,e)},!1)}var u={isFullscreen:function(){return!1},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},__events:{enter:[],exit:[],toggle:[]},on:function(e,n){e=u.__events[e];"function"==typeof n&&"object"==typeof e&&e.constructor===Array&&e.indexOf(n)<0&&e.push(n)}};return c.requestFullscreen?(u.enterFullscreen=function(){var n=0,t=50,u=function(){c.requestFullscreen().catch(function(e){n++<3&&(t*=2,setTimeout(u,t))})};u()},n("fullscreenchange","fullscreen")):c.msRequestFullscreen?(u.enterFullscreen=function(){return c.msRequestFullscreen()},n("msfullscreenchange","msFullscreenElement")):c.mozRequestFullScreen?(u.enterFullscreen=function(){return c.mozRequestFullScreen()},n("mozfullscreenchange","mozFullScreen")):c.webkitRequestFullscreen?(u.enterFullscreen=function(){return c.webkitRequestFullscreen()},n("webkitfullscreenchange","webkitIsFullScreen")):(u.enterFullscreen=console.log.bind(console,"Fullscreen API is not supported"),u.exitFullscreen=u.enterFullscreen),"function"==typeof e&&e(u),u}}();