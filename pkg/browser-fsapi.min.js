var fs_api=function(){function l(){return window.screen.width==window.innerWidth&&window.screen.height==window.innerHeight}const t=new Map;function n(n){t.forEach(function(e){e(n)})}let u=l();function s(e){"function"==typeof e&&(t.set(e,e),e(l()))}s(function(e){console.log(e?"entered fullscreen":"exited fs")});var e=c(document.body,function(e){function n(e){o&&r()}function t(e){s.classList.add(e)}function u(e){s.classList.remove(e)}var c=!1,o=!1,r=e.enterFullscreen,l=e.exitFullscreen,s=document.body;e.on("enter",function(){o=!1,t("fullscreen"),u("fullscreen_temp_off")}),e.on("exit",function(){c?(o=!0,t("fullscreen_temp_off")):(o=!1,c&&(document.removeEventListener("keydown",n),document.removeEventListener("keyup",n),document.removeEventListener("mousedown",n),document.removeEventListener("mouseup",n),document.removeEventListener("touchstart",n)),u("fullscreen_temp_off"),u("fullscreen"))}),e.enterFullscreen=function(e){o=!1,(c=!!e)&&(document.addEventListener("keydown",n),document.addEventListener("keyup",n),document.addEventListener("mousedown",n),document.addEventListener("mouseup",n),document.addEventListener("touchstart",n)),r()},e.exitFullScreen=function(){o=c=!1,u("fullscreen_temp_off"),u("fullscreen"),l()}});return e.newApi=c,window.onresize=function(e){l()?n(u=!0):u&&n(u=!1)},e;function c(c,e){function t(e){e!==o&&(u((o=e)?r.__events.enter:r.__events.exit,e),u(r.__events.toggle,e))}function n(e,n){r.isFullscreen=l,document.addEventListener(e,function(){t(r.isFullscreen())},!1)}var u=function(e,n){e.forEach(function(e){e(c,n)})},o=null,r={isFullscreen:function(){return!1},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},__events:{enter:[],exit:[],toggle:[]},on:function(e,n){e=r.__events[e];"function"==typeof n&&"object"==typeof e&&e.constructor===Array&&e.indexOf(n)<0&&e.push(n)}};return c.requestFullscreen?(r.enterFullscreen=function(){var n=0,t=50,u=function(){c.requestFullscreen().catch(function(e){n++<3&&(t*=2,setTimeout(u,t))})};u()},n("fullscreenchange"),s(t)):c.msRequestFullscreen?(r.enterFullscreen=function(){return c.msRequestFullscreen()},n("msfullscreenchange")):c.mozRequestFullScreen?(r.enterFullscreen=function(){return c.mozRequestFullScreen()},n("mozfullscreenchange")):c.webkitRequestFullscreen?(r.enterFullscreen=function(){return c.webkitRequestFullscreen()},n("webkitfullscreenchange")):(r.enterFullscreen=console.log.bind(console,"Fullscreen API is not supported"),r.exitFullscreen=r.enterFullscreen),"function"==typeof e&&e(r),r}}();