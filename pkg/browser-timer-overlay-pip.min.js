function setupPip(e,t,n,i,c,o,r,u,l){const d=window.safari?function(){setTimeout(I,33)}:function(){requestAnimationFrame(I)},m=createVideoElement(t);if(!m.requestPictureInPicture)return null;const s=document.getElementById(e),a=o?document.querySelector(o):s,h=u?document.querySelector(u):null;getInheritedBackgroundColor(a);p.lastContent="";const P=document.createElement("canvas"),f=(P.width=n,P.height=i,m.style.position="absolute",m.style.bottom=0,m.style.right=0,m.style.opacity=0,P.getContext("2d"));f.font=c,f.textAlign="center",f.textBaseline="middle",I();t=P.captureStream();return m.srcObject=t,p.enterPIP=function(){return document.pictureInPictureElement?(html.classList.add(r),!1):document.pictureInPictureEnabled?(m.requestPictureInPicture(),html.classList.add(r),!0):void 0},p.exitPIP=function(){return document.pictureInPictureElement?(document.exitPictureInPicture(),html.classList.remove(r),!0):document.pictureInPictureEnabled?(html.classList.remove(r),!1):void 0},p;function I(){var e,t=s.textContent;p.lastContent!==t&&(f.fillStyle=getInheritedBackgroundColor(a),f.fillRect(0,0,P.width,P.height),f.fillStyle=getInheritedColor(a),f.font=c,f.fillText(t,P.width/2,P.height/2),h&&(f.font=l,"none"!==(e=window.getComputedStyle(h,":before").content))&&f.fillText(e.replace(/^\"|\"$/g,""),P.width/2,32,P.width),p.lastContent=t),d()}function p(){document.pictureInPictureElement?(document.exitPictureInPicture(),html.classList.remove(r)):document.pictureInPictureEnabled&&(m.requestPictureInPicture(),html.classList.add(r))}}function createVideoElement(e){let t=document.querySelector("#"+e);var n;return t||((n=document.createElement("div")).innerHTML=`<video id="${e}" muted autoplay></video>`,t=n.querySelector("video"),n.removeChild(t),document.body.appendChild(t)),t}