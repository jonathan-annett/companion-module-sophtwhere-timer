function setupPip(e,t,n,i,c,r,u,o,l){if(!("function"==typeof document.exitPictureInPicture||null===document.pictureInPictureElement))return null;const d=window.safari?function(){setTimeout(I,33)}:function(){requestAnimationFrame(I)},m=createVideoElement(t);if(!m.requestPictureInPicture)return null;const s=document.getElementById(e),a=r?document.querySelector(r):s,P=o?document.querySelector(o):null;getInheritedBackgroundColor(a);p.lastContent="";const h=document.createElement("canvas"),f=(h.width=n,h.height=i,m.style.position="absolute",m.style.bottom=0,m.style.right=0,m.style.opacity=0,h.getContext("2d"));f.font=c,f.textAlign="center",f.textBaseline="middle",I();t=h.captureStream();return m.srcObject=t,p.enterPIP=function(){return document.pictureInPictureElement?(html.classList.add(u),!1):document.pictureInPictureEnabled?(m.requestPictureInPicture(),html.classList.add(u),!0):void 0},p.exitPIP=function(){return document.pictureInPictureElement?(document.exitPictureInPicture(),html.classList.remove(u),!0):document.pictureInPictureEnabled?(html.classList.remove(u),!1):void 0},p;function I(){var e,t=s.textContent;p.lastContent!==t&&(f.fillStyle=getInheritedBackgroundColor(a),f.fillRect(0,0,h.width,h.height),f.fillStyle=getInheritedColor(a),f.font=c,f.fillText(t,h.width/2,h.height/2),P&&(f.font=l,"none"!==(e=window.getComputedStyle(P,":before").content))&&f.fillText(e.replace(/^\"|\"$/g,""),h.width/2,32,h.width),p.lastContent=t),d()}function p(){document.pictureInPictureElement?(document.exitPictureInPicture(),html.classList.remove(u)):document.pictureInPictureEnabled&&(m.requestPictureInPicture(),html.classList.add(u))}}function createVideoElement(e){let t=document.querySelector("#"+e);var n;return t||((n=document.createElement("div")).innerHTML=`<video id="${e}" muted autoplay></video>`,t=n.querySelector("video"),n.removeChild(t),document.body.appendChild(t)),t}