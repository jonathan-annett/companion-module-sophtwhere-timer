function onNewTabId(n){const t=sessionStorage.getItem("tabId");if(!t)return n("new",s());{const a=new BroadcastChannel("tabId_"+t);let o=setTimeout(function(){o=null,a.onmessage=null,a.close(),s(t),console.log("reload...",t),n("reload",t)},50);a.onmessage=function(e){"?"===e.data&&a.postMessage("!"),"!"===e.data&&o&&(o&&(clearTimeout(o),o=null,console.log(" ( cancelled:reload...",t," )")),a.onmessage=null,a.close(),e=s(),console.log("duplicate...",t,"--\x3e",e),n("duplicate",e))},a.postMessage("?")}function s(e){e=e||Math.random().toString(36).slice(-6)+Date.now().toString(36).slice(-4)+Math.random().toString(36).slice(-6);sessionStorage.setItem("tabId",e);const o=new BroadcastChannel("tabId_"+e);return o.onmessage=function(e){o.postMessage("!")},e}}